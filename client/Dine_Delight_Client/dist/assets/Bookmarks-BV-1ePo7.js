import{f as u,r as l,j as e,L as g,y as b,ab as v,ac as N,U as p}from"./index-DLCA8CUi.js";import{S as w}from"./ShimmerCard-DGHJDH3V.js";import{a as B}from"./axios-B6xwUs71.js";import{c as h}from"./timeConverter-D2pGrZyb.js";import{a as S}from"./axiosService-BUADEq0L.js";import{s as k}from"./toaster-KMB571tZ.js";import"./index-VWaDGczM.js";import"./logout-DcSaUvZa.js";import"./Set_GetLs-jfIHgayU.js";const F=({_id:a,restaurantName:o,primaryImage:s,address:c,tableRatePerPerson:i,openingTime:m,closingTime:r,handleRemoveBookmark:t})=>{const x=u(n=>n.UserSlice),[d,f]=l.useState(!0),j=async()=>{const n=d?"removeFromBookmarks":"addToBookmarks";S.patch(`${p}/bookmarks?action=${n}`,{restaurantId:a}).then(({data:y})=>{k(y.message),f(!d),n==="removeFromBookmarks"&&t(a)}).catch(()=>{k("sorry,we couldn't complete that action.","error")})};return e.jsx("div",{className:"my-4 rounded-xl hover:shadow-lg  shadow-gray-200 dark:shadow-gray-900 bg-white dark:bg-gray-800 duration-300 hover:-translate-y-1",children:e.jsxs("figure",{children:[e.jsx(g,{to:`view_restaurant/${a}`,children:e.jsx("img",{src:s??b,alt:"Image of "+o,className:"rounded-t h-52 w-full object-cover"})}),e.jsxs("figcaption",{className:"p-4 relative",children:[x.isAuthenticated&&x.role==="user"&&e.jsx(e.Fragment,{children:e.jsx("p",{className:"absolute top-2 right-3 text-xl text-black  cursor-pointer",onClick:j,children:d?e.jsx(v,{}):e.jsx(N,{})})}),e.jsx(g,{to:`/view_restaurant/${a}`,children:e.jsx("h1",{className:"text-lg mb-1 font-bold leading-relaxed text-gray-800 dark:text-gray-300",children:o})}),e.jsx("p",{className:"leading-5 text-gray-500 dark:text-gray-400",children:c}),e.jsxs("p",{className:"leading-5 text-gray-500 dark:text-gray-400",children:[i," for one"]})]}),e.jsxs("p",{className:"p-4 text-sm font-semibold",children:[h(m)," - ",h(r)]})]})})},_=()=>{const[a,o]=l.useState(!1),[s,c]=l.useState([]),i=u(r=>r.UserSlice);l.useEffect(()=>{o(!0),B.get(p+`/users/${i.id}`).then(({data:r})=>{c(r.user.bookmarks),o(!1)}).catch(r=>console.log(r))},[]);const m=r=>{c(s.filter(t=>t._id!==r))};return e.jsx("div",{children:e.jsx("section",{className:"bg-gray-50 dark:bg-gray-900 py-10 px-12  rounded-lg",children:e.jsx("div",{className:"grid grid-flow-row gap-4 text-neutral-600 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3",children:a?Array.from({length:8}).map((r,t)=>e.jsx(w,{},t)):e.jsx(e.Fragment,{children:s.length?e.jsx(e.Fragment,{children:s==null?void 0:s.map(r=>l.createElement(F,{...r,key:r._id,handleRemoveBookmark:m}))}):e.jsx("div",{className:"col-span-6 flex flex-col justify-center items-center",children:e.jsx("h2",{className:"text-2xl  font-bold mb-2",children:"No bookmarks yet"})})})})})})};export{_ as default};
