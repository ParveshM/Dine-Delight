import{l as I,r,U as y,o as C,j as e,L as P}from"./index-JE-bpBmX.js";import{c as k}from"./index-M0P0R0fk.js";import{a as b}from"./axiosService-B1H-UEah.js";import{s as j}from"./toaster-CbQaQdgB.js";import{u as L}from"./uploadImages-DewhUy9V.js";import{d as E}from"./dummyUserImg-Dvp0fbEd.js";import"./axios-B6xwUs71.js";import"./index-VWaDGczM.js";import"./logout-DB6qYUsy.js";/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=I("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),R=()=>{const[s,c]=r.useState(null),[m,d]=r.useState(null),[p,x]=r.useState([]),[i,u]=r.useState(null),[g,t]=r.useState({name:"",imageFile:[]}),[N,v]=r.useState(null),[w,f]=r.useState(!1);return r.useEffect(()=>{b.get(y+"/profile").then(({data:a})=>{const{user:n,wallet:h,transactions:l}=a;c(n),d(h),x(l),t(o=>({...o,name:n.name}))}).catch(()=>j("Oops! Something went wrong","error"))},[]),{profile:s,wallet:m,transactons:p,formData:g,imagePreview:N,error:i,isSubmitting:w,handleInputChange:a=>{const{name:n,value:h}=a.target;let l="";if(n==="name")h.trim()?C.test(h)||(l="First letter must be capital and no leading or trailing space"):l="Name is required",u(l||null),t(o=>({...o,name:h.trim()}));else{const o=Array.from(a.target.files||[]);t(S=>({...S,[n]:o})),v(URL.createObjectURL(o[0]))}},handleSubmit:async()=>{if(!i){f(!0);const a=await L(g.imageFile);b.patch(y+"/profile/edit",{name:g.name,profilePicture:a&&a[0]?a[0]:s==null?void 0:s.profilePicture}).then(({data:n})=>{j(n.message),f(!1)}).catch(()=>{f(!1),j("Oops! Something went wrong while updating profile","error")})}}}},M=()=>{const{profile:s,wallet:c,transactons:m,formData:d,error:p,imagePreview:x,isSubmitting:i,handleInputChange:u,handleSubmit:g}=R();return e.jsxs("div",{className:"grid grid-cols-6 gap-4",children:[e.jsx("div",{className:"col-span-6 md:col-span-3",children:e.jsxs("div",{className:"border shadow-md rounded-md p-10 py-4",children:[e.jsx("div",{className:"flex justify-center  items-center gap-4",children:e.jsxs("div",{className:"relative w-36 h-36    overflow-hidden rounded-full",children:[e.jsx("img",{src:x||((s==null?void 0:s.profilePicture)??E),alt:"Profile",className:"w-full h-full object-cover"}),e.jsxs("label",{htmlFor:"profileImage",className:"absolute bottom-5 right-3 bg-gray-100 rounded-full p-2 cursor-pointer border border-gray-300",children:[e.jsx(F,{}),e.jsx("input",{id:"profileImage",name:"imageFile",type:"file",className:"hidden",accept:"image/*",onChange:u})]})]})}),e.jsxs("div",{className:"flex justify-end gap-2 items-center mt-4",children:[e.jsx("p",{className:"text-base font-semibold",children:"Joining date:"}),e.jsx("p",{children:(s==null?void 0:s.createdAt)&&new Date(s==null?void 0:s.createdAt).toLocaleDateString("en-IN",{day:"2-digit",month:"long",year:"numeric"})})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("input",{type:"text",placeholder:"Name",name:"name",value:d==null?void 0:d.name,onChange:u,className:"border-b-2  border-gray-200 focus:border-primary-600 focus:ring-primary-600 outline-none sm:text-sm p-2.5 mb-2"}),p&&e.jsx("p",{className:"text-red-500",children:p}),e.jsx("input",{type:"text",placeholder:"Email",value:(s==null?void 0:s.email)??"",readOnly:!0,className:"border-b-2 border-gray-200  outline-none sm:text-sm p-2.5"})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{className:`inline-block ${i&&"opacity-100 cursor-wait"} px-4 mt-2 py-2 text-lg font-medium text-white bg-gradient-to-r from-pink-500 to-orange-400 rounded-3xl   transition duration-300 ease-in-out hover:from-pink-600 hover:to-orange-500 focus:outline-none focus:ring-2 focus:ring-pink-500 focus:ring-offset-2`,disabled:i,onClick:g,children:i?"Submitting...":" Save changes"})})]})}),e.jsx("div",{className:"col-span-6 md:col-span-2",children:e.jsxs("div",{className:"border shadow-md rounded-md p-4",children:[e.jsxs("div",{className:"flex items-center justify-around mb-4",children:[e.jsxs("div",{className:"flex gap-2 items-center ",children:[e.jsx(k,{className:"h-8 w-8 text-yellow-400"}),e.jsxs("span",{className:"text-gray-600 ml-1",children:["â‚¹",c==null?void 0:c.balance,".00"]})]}),e.jsx(P,{to:"/transaction_history",className:"text-sm text-primary-600 hover:text-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-600",children:"View History"})]}),e.jsxs("div",{className:"space-y-2",children:[m.length?e.jsx("h3",{className:"",children:"Recent Transaction"}):e.jsx("h3",{children:"No recent transactions"}),m.length?m.slice(0,5).map(t=>e.jsxs("div",{className:"flex justify-between items-center bg-gray-100 rounded-md p-2",children:[e.jsx("div",{className:"text-sm text-gray-700",children:t.type}),e.jsx("div",{className:`text-sm font-semibold ${t.type==="Credit"?"text-green-600":"text-red-600"} `,children:t.type==="Credit"?`+${t.amount}`:`-${t.amount}`})]},t._id)):null]})]})})]})};export{M as default};
