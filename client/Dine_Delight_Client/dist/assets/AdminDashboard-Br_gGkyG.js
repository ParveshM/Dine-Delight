import{k as p,r as o,A as R,j as e,ad as M,l as D}from"./index-DLCA8CUi.js";import{s as B}from"./toaster-KMB571tZ.js";import{a as S}from"./axiosService-BUADEq0L.js";import{u as A,P as T}from"./usePaginateState-BOaB9aMD.js";import{s as O,C as U}from"./util-D-aj_Cqt.js";import{C as L,a as z,L as E,R as q}from"./ReportModal-CF7e3H6V.js";import{B as H}from"./Button-ByhPp_XO.js";import{C as J}from"./calendar-check-CjTJ5J8-.js";import{C as V}from"./chevron-down-BMkYRQSZ.js";import"./axios-B6xwUs71.js";import"./index-VWaDGczM.js";import"./logout-DcSaUvZa.js";import"./Set_GetLs-jfIHgayU.js";import"./formik.esm-CgPWx7Oh.js";import"./index-DS0oADGo.js";import"./index.esm-ClIUyleD.js";/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=p("CircleDollarSign",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 18V6",key:"zqpxq5"}]]);/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=p("UsersRound",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]]);function $(){const[s,t]=o.useState(null),[a,r]=o.useState([]),[l,c]=o.useState(!1),[d,x]=o.useState(null),{currentPage:i,setCurrentPage:n,pageSize:h,setPageSize:g,itemsPerPage:u,setItemsPerPage:j}=A();return o.useEffect(()=>{S.get(R+"/dashboard",{params:{status:d,page:i}}).then(({data:y})=>{const{totalUsers:N,totalBookings:f,totalRestaurants:b,totalProfit:C,graphData:v,bookings:k,count:P,limit:w}=y;t({totalBookings:f,totalUsers:N,totalProfit:C,totalRestaurants:b,data:v}),r(k),g(P),j(w)}).catch(()=>{B("Oops! Something went wrong","error")})},[d,i]),{dashboardData:s,currentPage:i,pageSize:h,isModalOpen:l,setIsModalOpen:c,itemsPerPage:u,bookings:a,setSelectedStatus:x,setCurrentPage:n}}const F=({restaurantId:s,userId:t,tableSlotId:a,bookingId:r,bookingStatus:l})=>e.jsxs("tr",{className:"dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600",children:[e.jsx("td",{className:"px-6 py-4",children:s.restaurantName}),e.jsx("td",{className:"px-6 py-4",children:(r==null?void 0:r.substring(0,12))+".."}),e.jsx("td",{className:"px-6 py-4",children:(t==null?void 0:t.name)??"John"}),e.jsx("td",{className:"px-6 py-4",children:(a==null?void 0:a.slotDate)&&new Date(a.slotDate).toLocaleDateString("en-IN",{day:"numeric",month:"numeric",year:"numeric"})}),e.jsxs("td",{className:"px-6 py-4",children:[a.startTime," - ",a.endTime]}),e.jsx("td",{className:`px-6 py-4 ${l&&O(l)}`,children:l})]});L.register(z);const Z=({data:s})=>{const t={labels:M,datasets:[{label:"Profit",data:U(s),fill:!0,backgroundColor:"rgba(59, 130, 246, 0.08)",borderColor:"rgb(99, 102, 241)",borderWidth:2,tension:.4,pointRadius:0,pointHoverRadius:3,pointBackgroundColor:"rgb(99, 102, 241)"}]};return e.jsx(E,{className:"mt-2",data:t,options:{layout:{padding:20},scales:{y:{beginAtZero:!0,grid:{drawOnChartArea:!0}}},plugins:{title:{display:!0,text:"Monthly profit "},legend:{display:!1}},interaction:{intersect:!1,mode:"nearest"},maintainAspectRatio:!1}})},m=({Icon:s,label:t,data:a,className:r,showPriceSymbol:l})=>e.jsx("div",{className:"col-span-6 md:col-span-3 ",children:e.jsxs("div",{className:" h-full flex items-center p-4 bg-white rounded-lg shadow-md ",children:[e.jsx("div",{className:`p-3 mr-4 ${r} rounded-full`,children:s}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-2 text-sm font-medium text-gray-600",children:t}),e.jsxs("p",{className:"text-lg font-semibold text-gray-700",children:[l&&"â‚¹",a]})]})]})}),de=()=>{const{dashboardData:s,currentPage:t,itemsPerPage:a,bookings:r,isModalOpen:l,setIsModalOpen:c,setCurrentPage:d,setSelectedStatus:x,pageSize:i}=$();return e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"grid grid-cols-12 gap-2 bg-gray-50 p-2 rounded-md",children:[e.jsx(m,{Icon:e.jsx(_,{className:"w-5 h-5 text-yellow-500"}),label:"Users",data:(s==null?void 0:s.totalUsers)||0,className:"bg-yellow-100"}),e.jsx(m,{Icon:e.jsx(J,{className:"w-5 h-5 text-blue-500"}),label:" Total bookings",data:(s==null?void 0:s.totalBookings)||0,className:"bg-blue-100"}),e.jsx(m,{Icon:e.jsx(D,{className:"w-5 h-5 text-orange-500"}),label:"Restaurants",data:(s==null?void 0:s.totalRestaurants)||0,className:"bg-orange-100"}),e.jsx(m,{Icon:e.jsx(W,{className:"w-5 h-5 text-green-500"}),label:"Total Profit",showPriceSymbol:!0,data:(s==null?void 0:s.totalProfit)||0,className:"bg-green-100"})]}),e.jsx("div",{className:"flex justify-end mt-1",children:e.jsx(H,{label:"Create Report",className:"bg-green-600 hover:bg-green-700 ",handleButtonclick:()=>c(!0)})}),e.jsx("div",{className:"grid grid-cols-2 mt-0",children:e.jsx("div",{className:"col-span-2  md:h-[400px]  rounded-lg",children:e.jsx(Z,{data:s==null?void 0:s.data})})}),e.jsxs("div",{className:"mt-8",children:[e.jsxs("div",{className:"flex justify-between px-2",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Bookings"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{className:"block appearance-none bg-white border border-gray-300 text-sm py-1 px-2 pr-8 rounded-md focus:outline-none focus:border-blue-500",onChange:n=>x(n.target.value),defaultValue:"",children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"Confirmed",children:"Confirmed"}),e.jsx("option",{value:"Cancelled",children:"Cancelled"}),e.jsx("option",{value:"Checked-in",children:"Checked-in"}),e.jsx("option",{value:"No-show",children:"No-show"}),e.jsx("option",{value:"Completed",children:"Completed"})]}),e.jsx("div",{className:"absolute top-1 right-0 flex items-center px-2 pointer-events-none",children:e.jsx(V,{})})]})]}),e.jsxs("div",{className:" overflow-x-auto shadow-md sm:rounded-lg min-h-28",children:[e.jsxs("table",{className:"w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400",children:[e.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Restaurant name"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"BookingId"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"User name"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Date"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Time"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Booking status"})]})}),e.jsx("tbody",{children:r.length?e.jsx(e.Fragment,{children:r.map(n=>o.createElement(F,{...n,key:n._id}))}):e.jsx("tr",{children:e.jsx("td",{children:"No booking found"})})})]}),e.jsx(T,{currentPage:t,totalCount:i,itemsPerPage:a,onPageChange:n=>d(n)})]})]}),l&&e.jsx(q,{isModalOpen:c})]})};export{de as default};
