import{l as we,r as a,v as A,j as e,g as xe,d as Ne,u as he,U as ie,L as $,w as Ce,c as Ee,i as ke,F as Ie,x as Se,y as Le,z as Re,B as Me,C as Te,D as De}from"./index-PhVsbpnH.js";import{F as Oe}from"./Footer-CsdhmUsF.js";import{N as Be}from"./Navbar-m5Ix3o3U.js";import{a as K}from"./axios-B6xwUs71.js";import{I as Fe}from"./index-vbcsc1ot.js";import{c as de}from"./timeConverter-D2pGrZyb.js";import{f as ue}from"./util-BKOJ7x0i.js";import{B as Ae}from"./Button-DMG4HvF1.js";import{L as Pe}from"./LoadingAnimation-Brlr9bxz.js";import{C as _e}from"./calendar-check-2-Dog9dTXs.js";import{C as $e}from"./clock-BDw9a-lG.js";import{U as ze}from"./users-BZPwp6jC.js";import{B as Ue}from"./index-CrZG1qyg.js";import He from"./Error404-C5MclnvZ.js";import{S as We}from"./StarRating-Cq792hji.js";import{m as Xe}from"./motion-BSLqCQOr.js";import{C as Ye}from"./Map-0RcNTlTf.js";import"./logo_copy-x91kgQhH.js";import"./reverseGeocode-CUQW3o8g.js";import"./index-vlbq0ERm.js";import"./chevron-down-BlY2YEL0.js";/**
 * @license lucide-react v0.341.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=we("MessageCircleMore",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}],["path",{d:"M8 12h.01",key:"czm47f"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M16 12h.01",key:"1l6xoz"}]]),Ge="/assets/food-cover-DDcPQHEI.png";var Ke=function(t){return Qe(t)&&!Je(t)};function Qe(r){return!!r&&typeof r=="object"}function Je(r){var t=Object.prototype.toString.call(r);return t==="[object RegExp]"||t==="[object Date]"||et(r)}var Ze=typeof Symbol=="function"&&Symbol.for,Ve=Ze?Symbol.for("react.element"):60103;function et(r){return r.$$typeof===Ve}function tt(r){return Array.isArray(r)?[]:{}}function z(r,t){return t.clone!==!1&&t.isMergeableObject(r)?U(tt(r),r,t):r}function rt(r,t,s){return r.concat(t).map(function(n){return z(n,s)})}function st(r,t){if(!t.customMerge)return U;var s=t.customMerge(r);return typeof s=="function"?s:U}function nt(r){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(r).filter(function(t){return Object.propertyIsEnumerable.call(r,t)}):[]}function me(r){return Object.keys(r).concat(nt(r))}function fe(r,t){try{return t in r}catch{return!1}}function at(r,t){return fe(r,t)&&!(Object.hasOwnProperty.call(r,t)&&Object.propertyIsEnumerable.call(r,t))}function it(r,t,s){var n={};return s.isMergeableObject(r)&&me(r).forEach(function(i){n[i]=z(r[i],s)}),me(t).forEach(function(i){at(r,i)||(fe(r,i)&&s.isMergeableObject(t[i])?n[i]=st(i,s)(r[i],t[i],s):n[i]=z(t[i],s))}),n}function U(r,t,s){s=s||{},s.arrayMerge=s.arrayMerge||rt,s.isMergeableObject=s.isMergeableObject||Ke,s.cloneUnlessOtherwiseSpecified=z;var n=Array.isArray(t),i=Array.isArray(r),d=n===i;return d?n?s.arrayMerge(r,t,s):it(r,t,s):z(t,s)}U.all=function(t,s){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(n,i){return U(n,i,s)},{})};function pe(r){var t,s,n="";if(typeof r=="string"||typeof r=="number")n+=r;else if(typeof r=="object")if(Array.isArray(r))for(t=0;t<r.length;t++)r[t]&&(s=pe(r[t]))&&(n&&(n+=" "),n+=s);else for(t in r)r[t]&&(n&&(n+=" "),n+=t);return n}function H(){for(var r,t,s=0,n="";s<arguments.length;)(r=arguments[s++])&&(t=pe(r))&&(n&&(n+=" "),n+=t);return n}const ot=(r,t,s=150)=>{const[n,i]=a.useState(0),d=a.useRef(null),l=a.useRef(null),c=a.useRef(!1),m=f=>{if(f!==null&&!c.current){c.current=!0;const{transitionDuration:C}=window.getComputedStyle(f),p=Number(C.replace("s",""))*1e3;i(p);return}if(!t)return;const k=t==null?void 0:t.split(" ");if(t!=null&&t.includes("duration")){const C=k==null?void 0:k.find(I=>I.includes("duration")),p=Number(C==null?void 0:C.split("-")[1].replace(/\D/g,""));i(p);return}else t!=null&&t.includes("transition")&&i(s)};a.useEffect(()=>{c.current||m(r)},[r]);const v=f=>{d.current!==null&&clearTimeout(d.current),d.current=setTimeout(()=>{f==null||f()},50)},j=f=>{c.current!==!1&&(l.current!==null&&clearTimeout(l.current),l.current=setTimeout(()=>{f==null||f()},n))};return a.useEffect(()=>()=>{l.current!==null&&clearTimeout(l.current)},[]),{transitionDuration:n,onTransitionShow:v,onTransitionHide:j,getTransitionTime:m}},ge=a.createContext({isOpenModal:!1,setTransitionDuration:null,scrollable:!1}),lt={wrapper:"min-[576px]:shadow-[0_0.5rem_1rem_rgba(#000, 0.15)] pointer-events-auto relative flex w-full flex-col rounded-md border-none bg-white bg-clip-padding text-current shadow-lg outline-none dark:bg-neutral-600",scrollable:"max-h-full"};A.forwardRef(({className:r,children:t,theme:s,tag:n="div",...i},d)=>{const l={...lt,...s},{scrollable:c}=a.useContext(ge),m=H(l.wrapper,c&&l.scrollable,r);return e.jsx(n,{className:m,...i,ref:d,children:t})});const ct={wrapper:"flex flex-shrink-0 items-center justify-between rounded-t-md border-b-2 border-neutral-100 border-opacity-100 p-4 dark:border-opacity-50"};A.forwardRef(({className:r,children:t,theme:s,tag:n="div",...i},d)=>{const l={...ct,...s},c=H(l.wrapper,r);return e.jsx(n,{className:c,...i,ref:d,children:t})});const dt={scrollable:"overflow-y-auto",wrapper:"relative flex-auto p-4"};A.forwardRef(({className:r,children:t,theme:s,tag:n="div",...i},d)=>{const l={...dt,...s},{scrollable:c}=a.useContext(ge),m=H(l.wrapper,c&&l.scrollable,r);return e.jsx(n,{className:m,...i,ref:d,children:t})});const ut={wrapper:"flex flex-shrink-0 flex-wrap items-center justify-end rounded-b-md border-t-2 border-neutral-100 border-opacity-100 p-4 dark:border-opacity-50"};A.forwardRef(({className:r,children:t,theme:s,tag:n="div",...i},d)=>{const l={...ut,...s},c=H(l.wrapper,r);return e.jsx(n,{className:c,...i,ref:d,children:t})});A.createContext({});A.createContext({});a.createContext({activeIndex:-1,animation:!0,isOpenState:!1,setIsOpenState:()=>{},setReferenceElement:()=>{},setPopperElement:()=>{},setActiveIndex:()=>{},popperElement:null,referenceElement:null,autoClose:!0,onHide:()=>{},onHidden:()=>{},onShow:()=>{},onShown:()=>{}});const mt=r=>r.offsetHeight,xt=r=>{if(!r||r.getClientRects().length===0)return!1;if(r instanceof HTMLElement&&r.style&&r.parentNode&&r.parentNode instanceof HTMLElement&&r.parentNode.style){const t=getComputedStyle(r),s=getComputedStyle(r.parentNode);return getComputedStyle(r).getPropertyValue("visibility")==="visible"||t.display!=="none"&&s.display!=="none"&&t.visibility!=="hidden"}return!1},be=a.createContext({activeSlide:0,setTransitionDuration:()=>{},block:"",visible:"",crossfade:void 0,setCarouselItems:()=>{},isFirstRender:{current:!0}}),ht={carouselWrapper:"relative",pointer:"touch-pan-y",block:"!block",visible:"opacity-100 !z-10",invisible:"opacity-0 z-0",slideRight:"translate-x-full",slideLeft:"-translate-x-full",nextBtn:"absolute bottom-0 right-0 top-0 z-30 flex w-[15%] items-center justify-center border-0 bg-none p-0 text-center text-white opacity-50 transition-opacity duration-150 ease-[cubic-bezier(0.25,0.1,0.25,1.0)] hover:text-white hover:no-underline hover:opacity-90 hover:outline-none focus:text-white focus:no-underline focus:opacity-90 focus:outline-none motion-reduce:transition-none",nextBtnIcon:"inline-block h-8 w-8 [&>svg]:h-8",prevBtn:"absolute bottom-0 left-0 top-0 z-30 flex w-[15%] items-center justify-center border-0 bg-none p-0 text-center text-white opacity-50 transition-opacity duration-150 ease-[cubic-bezier(0.25,0.1,0.25,1.0)] hover:text-white hover:no-underline hover:opacity-90 hover:outline-none focus:text-white focus:no-underline focus:opacity-90 focus:outline-none motion-reduce:transition-none",prevBtnIcon:"inline-block h-8 w-8 [&>svg]:h-8",indicatorsWrapper:"absolute bottom-0 left-0 right-0 z-30 mx-[15%] mb-4 flex list-none justify-center p-0",indicator:"mx-[3px] box-content h-[3px] w-[30px] flex-initial cursor-pointer border-0 border-y-[10px] border-solid border-transparent bg-white bg-clip-padding p-0 -indent-[999px] opacity-50 transition-opacity duration-[600ms] ease-[cubic-bezier(0.25,0.1,0.25,1.0)] motion-reduce:transition-none focus:outline-none",activeIndicator:"!opacity-100"},ft=({tag:r="div",className:t,children:s,interval:n=5e3,ride:i=!1,keyboard:d=!0,pause:l="hover",wrap:c=!0,touch:m=!0,stopSliding:v,showControls:j,showIndicators:f,prevBtnIcon:k,nextBtnIcon:C,current:p,crossfade:I,onSlide:M,onSlid:y,theme:T,...D})=>{const[g,O]=a.useState(0),[w,L]=a.useState(0),[B,Q]=a.useState(document.visibilityState),[J,oe]=a.useState({initialX:0,initialY:0}),[N,ve]=a.useState([]),R=a.useRef(null),W=a.useRef(0),X=a.useRef(!0),Z=a.useRef(!1),P=a.useRef(!0),V=a.useRef(!1),Y=a.useRef(!1),q=a.useRef(null),ee=a.useRef(null),x={...ht,...T},je=H(x.carouselWrapper,m&&x.pointer,t),le=(o,u)=>{if(u!==void 0)return N[u];const h=o==="prev",b=W.current,F=h?-1:1;let E=b;if(c)E=(b+F)%N.length;else{if(E===N.length-1&&o==="next"||E===0&&o==="prev")return;E+=F}return E===-1?N[N.length-1]:N[E]},ye=(o,u)=>{if(u!==void 0){W.current=u,O(u);return}const h=g===N.length-1?0:g+1,b=g===0?N.length-1:g-1;W.current=o==="next"?h:b,O(o==="next"?h:b)},te=a.useCallback((o,u,h)=>{if(!N||N.length<2||Z.current)return;P.current&&(P.current=!1);const b=N[g];if(!b||!u)return;Z.current=!0,M==null||M();const F=o==="next",E=F?x.slideLeft:x.slideRight,G=F?x.slideRight:x.slideLeft;ye(o,h),u.classList.add(G,x.block),mt(u),b.classList.add(E),I&&(b.classList.add(...x.invisible.split(" ")),b.classList.remove(...x.visible.split(" ")),u.classList.add(...x.visible.split(" "))),u.classList.remove(G),ee.current!==null&&clearTimeout(ee.current),ee.current=setTimeout(()=>{Z.current=!1,y==null||y(),b.classList.remove(E,x.block)},w)},[g,w,I]),S=a.useCallback(o=>{const u=le(o),{hidden:h}=document;if(B&&(h||!xt(R.current))){V.current=!0;return}u&&te(o,u)},[te,B]),ce=o=>{const u=W.current,h=o>u?"next":"prev",b=le(h,o);!b||o>N.length-1||o<0||o===g||te(h,b,o)},re=a.useCallback(()=>{typeof n=="number"&&n>0&&(Y.current&&(Y.current=!1),q.current=setTimeout(()=>{S("next")},n))},[S,n]),_=()=>{q.current&&(clearTimeout(q.current),q.current=null)},se=a.useCallback(o=>{oe({initialX:o.touches[0].clientX,initialY:o.touches[0].clientY})},[]),ne=a.useCallback(o=>{if(!J)return;const{initialX:u,initialY:h}=J,b=o.touches[0].clientX,F=o.touches[0].clientY,E=u-b,G=h-F;Math.abs(E)>Math.abs(G)&&(E>0?S("next"):S("prev")),oe({initialX:0,initialY:0})},[S,J]),ae=a.useCallback(o=>{switch(o.key){case"ArrowLeft":o.preventDefault(),S("prev");break;case"ArrowRight":o.preventDefault(),S("next");break}},[S]);return a.useEffect(()=>{const o=()=>{Q(document.visibilityState)};return document.addEventListener("visibilitychange",o),()=>{document.removeEventListener("visibilitychange",o)}},[n,i]),a.useEffect(()=>{if(!d||!R.current)return;const o=R.current;return o.addEventListener("keydown",ae),()=>{o.removeEventListener("keydown",ae)}},[d,ae]),a.useEffect(()=>{if(!m||!R.current)return;const o=R.current;return o.addEventListener("touchmove",ne),o.addEventListener("touchstart",se),()=>{o.removeEventListener("touchmove",ne),o.removeEventListener("touchstart",se)}},[m,ne,se]),a.useEffect(()=>{if(!i||i===!0&&P.current||!l||!R.current)return;const o=()=>{_(),Y.current=!0},u=()=>{v||re()},h=R.current;return h.addEventListener("mouseenter",o),h.addEventListener("mouseleave",u),h.addEventListener("touchend",_),()=>{h.removeEventListener("mouseenter",o),h.removeEventListener("mouseleave",u),h.removeEventListener("touchend",_)}},[l,i,re]),a.useEffect(()=>{if(X.current){X.current=!1;return}if(!(!N||N.length<2)&&!(v||i===!0&&P.current||!i||B==="hidden"||!n||Y.current)){if(V.current&&B==="visible"){S("next"),V.current=!1;return}return re(),()=>{_()}}},[g,n,i,w,B,v]),a.useEffect(()=>{X.current||(v&&!P.current&&_(),p!==void 0&&ce(p))},[v,p]),e.jsx(be.Provider,{value:{activeSlide:g,setTransitionDuration:L,block:x.block,visible:x.visible,crossfade:I,setCarouselItems:ve,isFirstRender:X},children:e.jsxs(r,{ref:R,className:je,current:g,...D,children:[s,j&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>S("prev"),className:x.prevBtn,type:"button",children:[e.jsx("span",{className:x.prevBtnIcon,children:k||e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})})}),e.jsx("span",{className:"!absolute !-m-px !h-px !w-px !overflow-hidden !whitespace-nowrap !border-0 !p-0 ![clip:rect(0,0,0,0)]",children:"Previous"})]}),e.jsxs("button",{onClick:()=>S("next"),className:x.nextBtn,type:"button",children:[e.jsx("span",{className:x.nextBtnIcon,children:C||e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})})}),e.jsx("span",{className:"!absolute !-m-px !h-px !w-px !overflow-hidden !whitespace-nowrap !border-0 !p-0 ![clip:rect(0,0,0,0)]",children:"Next"})]})]}),f&&e.jsx("div",{className:x.indicatorsWrapper,children:N.map((o,u)=>e.jsx("button",{"data-te-target":u,onClick:()=>ce(u),className:`${x.indicator} ${u===g?`${x.activeIndicator}`:""}`},u))})]})})},pt=({tag:r="div",className:t,itemID:s,children:n,...i})=>{const d=a.useRef(null),{activeSlide:l,setTransitionDuration:c,block:m,visible:v,crossfade:j,setCarouselItems:f,isFirstRender:k}=a.useContext(be),{transitionDuration:C}=ot(d.current,t);return a.useEffect(()=>{if(k!=null&&k.current){f(p=>[...p,d.current]);return}},[]),a.useEffect(()=>{if(l===s-1){const p=d.current;p.classList.add(m),j&&p.classList.add(...v.split(" ")),c(C)}},[l,s,j,C]),e.jsx(r,{ref:d,className:t,...i,children:n})},gt=({setIsModalOpen:r,selectedSlot:t,restaurant:s})=>{const n=xe(j=>j.UserSlice.isAuthenticated),i=Ne(),d=he(),[l,c]=a.useState(null);a.useEffect(()=>{K.get(ie+`/tables/${t==null?void 0:t.tableId}`).then(({data:j})=>c(j.tableData)).catch(()=>console.log("Error"))},[]);const m=()=>{t&&(i(Ce(t)),d("/reserve_table"))},v=t!=null&&t.slotDate?new Date(t.slotDate).toLocaleDateString("en-us",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"";return e.jsx("div",{tabIndex:-1,"aria-hidden":"true",className:"fixed inset-0 z-50  overflow-y-auto bg-gray-500 bg-opacity-50 flex justify-center items-center ",children:e.jsxs("div",{className:"relative bg-white rounded-lg shadow-lg max-w-md w-full mx-3 sm:top-7",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 inline-flex items-center gap-2",children:"Complete your Reservation"}),e.jsxs("button",{type:"button",className:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto flex justify-center items-center",onClick:()=>r(!1),children:[e.jsx("svg",{className:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})}),e.jsx("span",{className:"sr-only",children:"Close modal"})]})]}),e.jsxs("form",{className:"p-4 md:p-5",children:[e.jsxs("div",{className:"grid gap-4 mb-4 grid-cols-4",children:[e.jsx("div",{className:"col-span-4 font-bold text-3xl",children:s.restaurantName}),e.jsxs("div",{className:"col-span-4 flex gap-2",children:[e.jsx(_e,{}),e.jsx("p",{children:v})]}),e.jsxs("div",{className:"col-span-4 flex gap-2",children:[e.jsx($e,{}),e.jsxs("p",{children:[t==null?void 0:t.startTime," - ",t==null?void 0:t.endTime]})]}),e.jsxs("div",{className:"col-span-4 flex gap-2",children:[e.jsx(ze,{}),e.jsxs("p",{children:[l==null?void 0:l.capacity," guests"]})]})]}),n?e.jsx("button",{className:`text-white w-full  bg-green-500 hover:bg-green-600
            focus:ring-green-400 focus:ring-2 focus:outline-none  font-medium rounded-lg
            text-sm px-5 py-2.5 text-center `,type:"button",onClick:m,children:"Confirm Reservation"}):e.jsx($,{to:"/user/auth/login",className:`text-white w-full  bg-red-500 hover:bg-red-600
          focus:ring-red-400 focus:ring-2 focus:outline-none  font-medium rounded-lg
          text-sm px-5 py-2.5 text-center`,children:"Login"})]})]})})},bt=({restaurantInfo:r,tableSlots:t,setTableSlot:s})=>{const[n,i]=Ee(),[d,l]=a.useState(!1),[c,m]=a.useState(!1),[v,j]=a.useState(null),[f,k]=a.useState({date:ue(new Date),guest:2}),C=y=>{const{name:T,value:D}=y.target;k(O=>({...O,[T]:D}));const g=Object.fromEntries(n.entries());i({...g,[T]:D})},p=Object.fromEntries(n.entries()),I=new URLSearchParams(p).toString();a.useEffect(()=>(I.length&&(l(!0),K.get(ie+`/restaurants/${r._id}?${I}`).then(({data:y})=>{setTimeout(()=>{s(y.tableSlots),l(!1)},1e3)}).catch(()=>{l(!1),console.error("Page not found")})),()=>m(!1)),[n]);const M=y=>{m(!0),j(y)};return e.jsxs(e.Fragment,{children:[c&&e.jsx(gt,{setIsModalOpen:m,selectedSlot:v,restaurant:r}),e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"mx-auto mt-8 bg-white min-w-sm max-w-2xl rounded-3xl shadow-md focus-within:border-gray-300",children:e.jsxs("div",{className:"grid grid-cols-2 border rounded-3xl",children:[e.jsxs("div",{className:"flex flex-col justify-evenly items-center border-r rounded-l-xl  hover:bg-slate-100",children:[e.jsx("label",{htmlFor:"guests",className:"font-semibold py-2",children:"No of guests"}),e.jsxs("select",{name:"guest",className:"py-2 px-6 bg-transparent outline-none appearance-none",onChange:C,children:[e.jsx("option",{value:2,children:"2 guests"}),e.jsx("option",{value:4,children:"4 guests"}),e.jsx("option",{value:6,children:"6 guests"})]})]}),e.jsxs("div",{className:"flex flex-col justify-center items-center rounded-r-xl hover:bg-slate-100",children:[e.jsx("label",{htmlFor:"date",className:"font-semibold py-2",children:"Date"}),e.jsx("input",{type:"date",placeholder:"Date",name:"date",value:f.date,min:ue(new Date),onChange:C,className:"py-2 px-6 bg-transparent outline-none"})]})]})})}),e.jsx("div",{}),e.jsx("div",{className:"mx-auto md:mx-10  mt-4",children:d?e.jsx(Pe,{}):e.jsx(e.Fragment,{children:t.length?e.jsx(e.Fragment,{children:t.map(y=>e.jsx(Ae,{label:y.startTime??"",className:"bg-blue-500 hover:bg-blue-600 m-1",handleButtonclick:()=>M(y)},y._id))}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"text-center mt-10",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-700 mb-4",children:"No slots available"}),e.jsx("p",{className:"text-gray-500",children:"Please try again later or contact support."})]})})})})]})},vt=()=>e.jsxs("div",{className:"h-screen flex flex-col lg:flex-row mt-20",children:[e.jsx("div",{className:"animate-pulse flex-1 border rounded-md shadow-md p-2 mx-4",children:e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"w-2/3 h-6 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"w-1/2 h-4 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"w-3/4 h-4 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"w-1/3 h-4 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"w-2/5 h-4 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"w-3/4 h-4 bg-gray-200 rounded mb-2"})]})}),e.jsx("div",{className:"lg:w-1/3 border rounded-md shadow-md mx-2 md:mx-0 mt-5 md:mt-0",children:e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"w-full h-80 bg-gray-200 rounded"}),e.jsxs("div",{className:"flex flex-col gap-2 mt-4",children:[e.jsx("div",{className:"w-2/3 h-4 bg-gray-200 rounded"}),e.jsx("div",{className:"w-3/4 h-4 bg-gray-200 rounded"}),e.jsx("div",{className:"w-1/2 h-4 bg-gray-200 rounded"})]})]})})]}),jt=({ratings:r})=>{const[t,s]=a.useState(0);return a.useEffect(()=>{const n=setInterval(()=>{s(i=>(i+1)%r.length)},5e3);return()=>clearInterval(n)},[]),e.jsx("div",{className:"flex justify-center items-center p-2 mb-2",children:e.jsx("div",{className:"bg-gray-200 rounded-lg p-3 text-center md:w-2/3",children:e.jsxs(Xe.div,{initial:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.5},className:"flex flex-col items-center space-y-4",children:[e.jsx("p",{className:"text-xl font-semibold",children:r[t].userId.name}),e.jsx("p",{className:"text-lg font-light text-gray-700 ",children:r[t].description}),e.jsx("div",{className:"flex items-center justify-center space-x-2",children:[...Array(r[t].rating)].map((n,i)=>e.jsx("svg",{className:"text-yellow-500 w-4 h-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",stroke:"currentColor",children:e.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},i))}),e.jsx("p",{className:"text-sm font-light text-gray-500",children:r[t].createdAt&&new Date(r[t].createdAt).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"})})]},t)})})},Ut=()=>{var M,y,T,D,g,O;const{id:r}=ke(),[t,s]=a.useState(),[n,i]=a.useState([]),[d,l]=a.useState(!1),[c,m]=a.useState([]),[v,j]=a.useState(!1),f=xe(w=>w.UserSlice),k=he();a.useEffect(()=>{K.get(ie+`/restaurants/${r}`).then(({data:w})=>{const{restaurant:L,tableSlots:B,ratings:Q}=w;m(Q),s(L),i(B)}).catch(()=>{console.error("Page not found"),l(!0)})},[]);const C=()=>{K.post(De+"/conversations",{senderId:f.id,recieverId:r}).then(({data:w})=>{const L=w.chats._id;k(`/chat?conversation=${L}`)}).catch(()=>{console.log("error in creating chat")})},p=a.useMemo(()=>{if(c!=null&&c.length)return(c.map(w=>w.rating).reduce((w,L)=>w+L,0)/c.length).toFixed(1)},[c]),I=p||"4.5";return d?e.jsx(He,{}):e.jsxs(e.Fragment,{children:[e.jsx(Be,{}),t?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:" flex flex-col lg:flex-row mt-20",children:[e.jsx("div",{className:"lg:w-2/3  border rounded-md shadow-md p-2 mx-4",children:e.jsx("div",{className:"p-4 ",children:e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsx("h1",{className:"text-4xl font-semibold uppercase",children:t.restaurantName}),e.jsxs("div",{className:"text-lg flex items-center gap-2 mt-2",children:[e.jsx(Fe,{}),e.jsx("p",{children:t.address})]}),e.jsxs("div",{className:" flex items-center text-lg  gap-2",children:[e.jsx(Ie,{}),e.jsxs("p",{className:"font-medium",children:[de(t.openingTime)," -"," ",de(t.closingTime)]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(We,{value:parseInt(I)??4.5,className:"flex"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("p",{className:"ms-1 text-sm font-medium text-gray-500 dark:text-gray-400",children:I}),e.jsx("p",{className:"ms-1 text-sm font-medium text-gray-500 dark:text-gray-400",children:"out of 5"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:Ge,alt:"Menu icon",height:25,width:25}),e.jsx($,{to:`/menu/${r}`,className:"hover:underline",children:"Show menu"})]}),f.isAuthenticated&&e.jsx("div",{className:"flex justify-end items-center",children:e.jsxs("div",{className:" relative p-2 bg-blue-100 rounded-full",onClick:C,onMouseEnter:()=>j(!0),onMouseLeave:()=>j(!1),children:[e.jsx(qe,{className:"w-5 h-5 text-blue-500 cursor-pointer"}),v&&e.jsx("div",{className:"absolute bottom-12 right-4 bg-black text-white p-2 rounded-md ",children:"Chat with Restaurant"})]})}),e.jsx("hr",{className:"bg-slate-200 h-[2px] "}),e.jsxs("div",{className:" flex flex-col  text-lg mb-2 ",children:[e.jsx("p",{className:"font-bold ",children:"Why we like it"}),e.jsx("p",{className:"font-medium",children:t.description})]}),e.jsx(bt,{restaurantInfo:t,tableSlots:n,setTableSlot:i})]})})}),e.jsx("div",{className:"lg:w-1/3 border rounded-md shadow-md mx-2 md:mx-0 mt-5 md:mt-0",children:e.jsxs("div",{className:"p-4 ",children:[e.jsx(ft,{className:" shadow-md bg-none",showControls:!0,showIndicators:!0,touch:!0,nextBtnIcon:e.jsx(Se,{className:"text-3xl text-white hover:text-slate-200 transition"}),prevBtnIcon:e.jsx(Le,{className:"text-3xl text-white hover:text-slate-200 transition"}),ride:"carousel",interval:!1,children:e.jsx("div",{className:"relative w-full overflow-hidden after:clear-both after:block after:content-[''] rounded-md",children:(M=t.secondaryImages)!=null&&M.length?(y=t==null?void 0:t.secondaryImages)==null?void 0:y.map((w,L)=>e.jsx(pt,{itemID:L,className:"relative float-left -mr-[100%] hidden w-full transition-transform duration-[600ms] ease-in-out motion-reduce:transition-none",children:e.jsx("img",{src:w,className:"block w-full object-cover h-72 ",alt:t.restaurantName+" images"})},L)):e.jsx("img",{src:t.primaryImage??Re,className:"block w-full object-cover h-72 ",alt:t.restaurantName+" images"})})}),e.jsx("h2",{className:"text-3xl  mt-2",style:{fontWeight:"bold"},children:"Here to find"}),e.jsx("div",{className:"rounded-md overflow-hidden  mt-4",children:e.jsx(Ye,{longitude:(T=t.location)==null?void 0:T.coordinates[0],latitude:(D=t.location)==null?void 0:D.coordinates[1],isMarkerDraggable:!1})}),e.jsxs("div",{className:"flex flex-col gap-2 mt-2 text-blue-500 ",children:[e.jsxs("div",{className:"flex items-center gap-2 hover:text-blue-600",children:[e.jsx(Ue,{}),e.jsx($,{to:`https://maps.google.com/?q=${(g=t.location)==null?void 0:g.coordinates[1]},${(O=t.location)==null?void 0:O.coordinates[0]}`,target:"_blank",className:"font-medium hover:underline font-mono",children:"Get Direction"})]}),e.jsxs("div",{className:"flex items-center gap-2 hover:text-blue-600 ",children:[e.jsx(Me,{}),e.jsx($,{to:"",className:"font-medium hover:underline font-mono",children:t.phone})]}),e.jsx("hr",{className:"h-0.5 bg-slate-100"}),e.jsxs("div",{className:"flex items-center gap-2 hover:text-blue-600 ",children:[e.jsx(Te,{}),e.jsx($,{target:"_blank",to:`https://mail.google.com/mail/u/0/?to=${t.email}&body=Hi ${t.restaurantName}, I need some assistance&bcc=%7Bemail_address%7D&cc=%7Bemail_address%7D&fs=1&tf=cm
                      `,className:"font-medium hover:underline font-mono",children:t.email})]})," ",e.jsx("hr",{className:"h-0.5 bg-slate-100"})]})]})})]}),c.length?e.jsxs("section",{className:"mt-2 border shadow-md rounded-md p-2",children:[e.jsx("h1",{className:"text-2xl text-center font-semibold ",children:"Reviews"}),e.jsx("div",{className:"bg-white shadow-md rounded-md",children:e.jsx(jt,{ratings:c})})]}):null]}):e.jsx(vt,{}),e.jsx(Oe,{})]})};export{Ut as default};
