import{r as l,u as p,U as d,j as e}from"./index-Brk7qNXk.js";import{u as h}from"./formik.esm-D5qv_kgt.js";import{a as m}from"./axios-B6xwUs71.js";import{g as u,r as f}from"./Set_GetLs-jfIHgayU.js";import{s as r}from"./toaster-CS37tbY2.js";const g=()=>{const[o,c]=l.useState(60),n=p(),a=h({initialValues:{otp:""},validate:({otp:t})=>{const s={};return/^\d{6}$/.test(t)||(s.otp="OTP must be exactly 6 digits"),t.trim().length||(s.otp="Required"),s},onSubmit:({otp:t})=>{const s=u("userId");if(s)m.post(d+"/verify_otp",{otp:t,userId:s}).then(({data:i})=>{r(i.message,"success"),f("userId"),setTimeout(()=>n("/user/auth/login"),1e3)}).catch(({response:i})=>{r(i.data.message,"error")});else return r("something went wrong","error"),n("/user/auth/login",{replace:!0})}});l.useEffect(()=>{const t=setInterval(()=>{o>0&&c(s=>s-1)},1e3);return()=>clearInterval(t)},[o]);const x=()=>{c(60);const t=u("userId");if(t)m.post(d+"/resend_otp",{userId:t}).then(({data:s})=>{r(s.message,"success")}).catch(({response:s})=>{r(s.data.message,"error")});else return r("something went wrong","error"),n("/user/auth/login")};return e.jsx("div",{className:"min-h-screen flex flex-col justify-center items-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-8 max-w-md w-full",children:[e.jsx("h1",{className:"text-3xl font-semibold text-center mb-6",children:"Email Verification"}),e.jsx("p",{className:"text-gray-600 text-center mb-8",children:"We have sent a verification code to your email"}),e.jsxs("form",{className:"space-y-6",onSubmit:a.handleSubmit,children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("input",{className:"w-full py-3 px-4 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",type:"text",placeholder:"Enter verification code",...a.getFieldProps("otp")}),a.errors.otp&&a.touched.otp&&e.jsx("p",{className:"text-red-500 mt-1",children:a.errors.otp})]}),e.jsx("button",{className:"w-full py-2 bg-green-400 text-white rounded-lg font-semibold shadow-md hover:bg-green-500 transition duration-300",type:"submit",children:"Verify Account"}),e.jsxs("div",{className:"text-center text-sm text-gray-500",children:[e.jsx("p",{children:"Didn't receive the code?"}),e.jsxs("button",{className:"text-blue-600 hover:underline",onClick:x,disabled:o!==0,children:["Resend",e.jsx("span",{className:"font-medium",children:o!==0&&` (${o}s)`})]})]})]})]})})},N=()=>e.jsx(g,{});export{N as default};
