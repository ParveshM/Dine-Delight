import{r as l,j as e,A as x,S as b}from"./index-Clsr7cZy.js";import{a as h}from"./axiosService-6jWxuYFr.js";import{T as f}from"./trash-BA0rTAYE.js";import{B as j}from"./Button-BUT0Crsf.js";import{s as g}from"./toaster-Cxs57kxq.js";import{u as y}from"./formik.esm-Dt9TmMOy.js";import{b as N}from"./index-BHVJx1gZ.js";import{C as w}from"./UploadwidgetContext-Du3bUYx3.js";import{c as v,a as p}from"./index.esm-CyhFtDQD.js";import{C as k}from"./chevron-down-D7Ovsuvo.js";import"./axios-B6xwUs71.js";import"./index-VWaDGczM.js";import"./logout-D3s9NhJa.js";import"./Set_GetLs-jfIHgayU.js";const S=({_id:a,image:o,title:i,isActive:d,index:c,handleDeleteImg:m})=>{const[s,r]=l.useState(d),t=()=>{r(!s),h.patch(x+`/banners/edit/${a}?isActive=${!s}`).catch(n=>console.log(n))};return e.jsxs("tr",{className:"bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600",children:[e.jsx("th",{scope:"row",className:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white",children:c}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("img",{src:o,alt:i,className:"w-20 h-20 object-cover rounded-md"})}),e.jsx("td",{className:"px-6 py-4",children:i}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("label",{className:"flex cursor-pointer select-none items-center",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"checkbox",checked:s,onChange:t,className:"sr-only"}),e.jsx("div",{className:`box block h-6 w-10 rounded-full ${s?"bg-green-500":"bg-red-500"}`}),e.jsx("div",{className:`absolute left-1 top-1 flex h-4 w-4 items-center justify-center rounded-full bg-white transition ${s?"translate-x-full":""}`})]})})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("button",{className:"p-1 rounded-md bg-red-400 text-white font-semibold hover:bg-red-500 transition duration-150",onClick:()=>m(a),children:e.jsx(f,{})})})]})},C=v().shape({title:p().required("Title is required"),description:p().required("Description is required"),restaurantUrl:p().required("Field is required")}),B=({setModalOpen:a,handleAddedBanner:o})=>{const[i,d]=l.useState([]),[c,m]=l.useState(""),[s,r]=l.useState(!1),t=y({initialValues:{title:"",description:"",restaurantUrl:"",image:""},validationSchema:C,onSubmit:n=>{r(!0),t.values.image=c,h.post(x+"/banners/add",n).then(({data:u})=>{o(u.newBanner),a(!1)}).catch(()=>g("Oops! Something went wrong","error")).finally(()=>r(!1))}});return l.useEffect(()=>{h.get(x+"/restaurants",{params:{page:1,limit:0}}).then(({data:n})=>{d(n.restaurants)}).catch(()=>null)},[]),e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-gray-500 bg-opacity-50 flex justify-center items-center ",children:e.jsxs("div",{className:"relative bg-white rounded-lg shadow-lg max-w-md w-full mx-2",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Add Banner"}),e.jsx("button",{type:"button",className:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto flex justify-center items-center",onClick:()=>a(!1),children:e.jsx(N,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"p-4 md:p-5",children:e.jsxs("form",{className:"grid  grid-cols-2 gap-4 mb-4",onSubmit:t.handleSubmit,children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{htmlFor:"title",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Title"}),e.jsx("input",{type:"text",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg outline-none block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white ",...t.getFieldProps("title")}),t.errors.title&&e.jsx("p",{className:"col-span-2 mt-1 text-red-500",children:t.errors.title})]}),e.jsxs("div",{className:"col-span-2 ",children:[e.jsx("label",{htmlFor:"description",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Description"}),e.jsx("textarea",{rows:1,className:"bg-gray-50 border border-gray-300 outline-none text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",...t.getFieldProps("description")}),t.errors.description&&e.jsx("p",{className:"col-span-2 mt-1 text-red-500",children:t.errors.description})]}),e.jsxs("div",{className:"relative col-span-2",children:[e.jsxs("select",{className:"block w-full appearance-none bg-white border border-gray-300 text-sm py-1 px-2 pr-8 rounded-md focus:outline-none focus:border-blue-500",...t.getFieldProps("restaurantUrl"),children:[e.jsx("option",{children:"Select a restaurant"}),i.length?e.jsx(e.Fragment,{children:i.map(n=>e.jsx("option",{value:n._id,children:n.restaurantName}))}):e.jsx("option",{children:"No options available"})]}),e.jsx("div",{className:"absolute top-1 right-0 flex items-center px-2 pointer-events-none",children:e.jsx(k,{})}),t.errors.restaurantUrl&&e.jsx("p",{className:"col-span-2 mt-1  text-red-500",children:t.errors.restaurantUrl})]}),e.jsxs("div",{className:"col-span-2 flex items-center gap-2",children:[e.jsx("p",{className:"font-medium",children:" Upload images"}),e.jsx(w,{uwConfig:b,setImageUrl:m}),c&&e.jsx("img",{src:c,alt:"image preview",width:100,height:100})]}),e.jsx("div",{className:"col-span-2",children:e.jsx("button",{type:"submit",className:"text-white w-full disabled:cursor-wait bg-green-500 hover:bg-green-600 focus:ring-green-400 focus:ring-2 focus:outline-none  font-medium rounded-lg text-sm px-5 py-2 text-center",disabled:s,children:"Submit"})})]})})]})})},R=()=>{const[a,o]=l.useState([]),[i,d]=l.useState(!1);l.useEffect(()=>{h.get(x+"/banners").then(({data:s})=>o(s.banners)).catch(()=>g("Oops! Something went wrong","error"))},[]);const c=s=>{h.delete(x+`/banners/remove/${s}`).then(({data:r})=>{g(r.message),o(a.filter(t=>t._id!==s))}).catch(r=>console.log(r))},m=s=>{o(r=>[...r,s])};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center my-2",children:[e.jsx("h1",{className:"mb-2 text-xl font-semibold mt-2",children:"Banners"}),e.jsx(j,{label:"Add",className:"bg-orange-400 hove:bg-orange-500",handleButtonclick:()=>d(!0)})]}),a.length?e.jsx("div",{className:"relative overflow-x-auto shadow-md sm:rounded-lg custom-vh",children:e.jsxs("table",{className:"w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400",children:[e.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3",children:"SL:no"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Image"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Title"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"status"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Action"})]})}),e.jsx("tbody",{children:a.map((s,r)=>l.createElement(S,{...s,key:s.image,index:r+1,handleDeleteImg:c}))})]})}):e.jsx("h1",{className:"flex justify-center  items-center text-xl font-bold ",children:"No banners"}),i&&e.jsx(B,{setModalOpen:d,handleAddedBanner:m})]})};export{R as default};
