import{j as e,r as n,R as p}from"./index-PhVsbpnH.js";import{a as h}from"./axiosService-D1EHKbpV.js";import{T as b}from"./trash-dG9CA9h6.js";import{d as N}from"./validation-C2eDts5v.js";import{s as o}from"./toaster-keYC6E8y.js";import{c as g}from"./timeConverter-D2pGrZyb.js";import"./axios-B6xwUs71.js";import"./index-VWaDGczM.js";import"./logout-DKSxkwX5.js";import"./index.esm-19Yhz-rY.js";const T=({_id:s,startTime:a,endTime:m,handleDeleteSlot:c})=>e.jsxs("div",{className:"p-2 border  border-gray-200 rounded-md flex justify-between mb-2",children:[e.jsxs("p",{className:"font-semibold sm:ml-10",children:[a," - ",m]}),e.jsx("div",{className:"space-x-2",children:e.jsx("button",{className:"px-2 py-1 bg-red-500 text-white rounded-md",onClick:()=>c(s),children:e.jsx(b,{})})})]}),D=()=>{const[s,a]=n.useState([]),[m,c]=n.useState({startTime:"09:00",endTime:"10:00"});n.useEffect(()=>{h.get(p+"/time_slots").then(({data:t})=>a(t.timeSlots)).catch(t=>console.log(t))},[]);const x=t=>{const{name:l,value:r}=t.target;c(i=>({...i,[l]:r}))},u=t=>{h.delete(p+`/time_slots/${t}`).then(({data:l})=>{o(l.message);const r=s.filter(i=>i._id!==t);a(r)}).catch(()=>o("Oops! Something went wrong","error"))},f=t=>{if(t.preventDefault(),N(m.startTime,m.endTime)){const r=g(m.startTime),i=g(m.endTime);h.post(p+"/time_slots/new",{startTime:r,endTime:i}).then(({data:d})=>{o(d.message),a(j=>[...j,d.newTimeSlot])}).catch(({response:d})=>o(d.data.message,"error"))}else o("Start time must be less than end time","error")};return e.jsxs("div",{className:" p-4",children:[e.jsx("h1",{className:"text-2xl font-semibold ",children:"Time Slots"}),e.jsxs("div",{className:"grid grid-cols-6 gap-4 ",children:[e.jsx("div",{className:"col-span-6 sm:col-span-2 md:col-span-3 lg:col-span-2  rounded-lg mt-10 h-64 md:h-[400px] overflow-y-auto",children:s!=null&&s.length?s==null?void 0:s.map(t=>e.jsxs(e.Fragment,{children:[n.createElement(T,{...t,handleDeleteSlot:u,key:t._id}),n.createElement(T,{...t,handleDeleteSlot:u,key:t._id})]})):e.jsx("p",{className:"text-lg font-medium",children:"No time slot added"})}),e.jsx("div",{className:"col-span-6 sm:col-span-2 md:col-span-3 lg:col-span-2",children:e.jsxs("div",{className:"flex flex-col gap-4 items-center justify-between md:ml-20",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Add New Slot"}),e.jsxs("form",{onSubmit:f,className:"flex items-center",children:[e.jsx("input",{type:"time",name:"startTime",value:m.startTime,onChange:x,className:"border border-gray-300 p-2 rounded-md mr-2",required:!0}),e.jsx("span",{children:"-"}),e.jsx("input",{type:"time",name:"endTime",value:m.endTime,onChange:x,className:"border border-gray-300 p-2 rounded-md ml-2",required:!0}),e.jsx("button",{type:"submit",className:"p-2 px-4 bg-blue-500 text-white rounded-md ml-2",children:"Add"})]})]})})]})]})};export{D as default};
