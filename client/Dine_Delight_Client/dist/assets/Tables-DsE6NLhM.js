import{u as w,j as e,r as c,R as h,M as j}from"./index-DLCA8CUi.js";import{a as f}from"./axiosService-BUADEq0L.js";import{s as b}from"./toaster-KMB571tZ.js";import{B as m}from"./Button-ByhPp_XO.js";import{u as N}from"./formik.esm-CgPWx7Oh.js";import{a as _}from"./index-ChFGO7Uu.js";import{c as v,a as T}from"./index.esm-ClIUyleD.js";import{u as C,P as S}from"./usePaginateState-BOaB9aMD.js";import"./axios-B6xwUs71.js";import"./index-VWaDGczM.js";import"./logout-DcSaUvZa.js";import"./Set_GetLs-jfIHgayU.js";const P=({sl_no:o,_id:s,tableNumber:n,capacity:a,location:r})=>{const d=w();return e.jsxs("tr",{className:"bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600",children:[e.jsx("td",{scope:"row",className:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white",children:o}),e.jsx("td",{className:"px-6 py-4",children:n}),e.jsx("td",{className:"px-6 py-4",children:a}),e.jsx("td",{className:"px-6 py-4",children:r}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("button",{className:"py-2 px-5 rounded-md bg-green-400 text-white font-semibold hover:bg-green-500 transition duration-150",onClick:()=>d(`/restaurant/view_table/${s}`),children:"View"})})]})},A=v().shape({tableNumber:T().required("Table number is required").matches(/^[A-Za-z]+\d+$/,"Table number must start with a letter followed by numbers").max(10,"Table number must me less than 10 characters")}),F=({setIsModalOpen:o,addNewTable:s})=>{const[n,a]=c.useState(),r=N({initialValues:{tableNumber:"",capacity:2,location:"In"},validationSchema:A,onSubmit:d=>{a(!0),f.post(h+"/table/new",d).then(({data:l})=>{s(l.newTable),o(!1),b(l.message)}).catch(({response:l})=>{a(!1),b(l.data.message,"error")})}});return e.jsx("div",{tabIndex:-1,"aria-hidden":"true",className:"fixed inset-0 z-50 overflow-y-auto bg-gray-500 bg-opacity-50 flex justify-center items-center ",children:e.jsxs("div",{className:"relative bg-white rounded-lg shadow-lg max-w-md w-full mx-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 inline-flex items-center gap-2",children:["Add table ",e.jsx(j,{className:"text-orange-400 text-2xl"})]}),e.jsxs("button",{type:"button",className:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto flex justify-center items-center",onClick:()=>o(!1),children:[e.jsx("svg",{className:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})}),e.jsx("span",{className:"sr-only",children:"Close modal"})]})]}),e.jsxs("form",{className:"p-4 md:p-5",onSubmit:r.handleSubmit,children:[e.jsxs("div",{className:"grid gap-4 mb-4 grid-cols-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{htmlFor:"Table number",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Table number"}),e.jsx("input",{type:"text",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg outline-none block w-full p-2.5 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white ",...r.getFieldProps("tableNumber")}),r.errors.tableNumber&&r.touched.tableNumber&&e.jsx("div",{className:"text-red-500",children:r.errors.tableNumber})]}),e.jsxs("div",{className:"col-span-2 ",children:[e.jsx("label",{htmlFor:"Table size",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Table size"}),e.jsxs("select",{className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 focus:outline-none block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",onChange:r.handleChange,children:[e.jsx("option",{defaultValue:2,children:"2"}),e.jsx("option",{value:4,children:"4"}),e.jsx("option",{value:6,children:"6"})]})]}),e.jsxs("div",{className:"col-span-2 ",children:[e.jsx("label",{htmlFor:"Table Location",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Location"}),e.jsxs("div",{className:"flex ",children:[e.jsxs("div",{className:"mb-[0.125rem] mr-4 inline-block min-h-[1.5rem] pl-[1.5rem]",children:[e.jsx("input",{className:"relative float-left -ml-[1.5rem] mr-1 mt-0.5 h-5 w-5 appearance-none rounded-full border-2 border-solid border-neutral-300 before:pointer-events-none before:absolute before:h-4 before:w-4 before:scale-0 before:rounded-full before:bg-transparent before:opacity-0 before:shadow-[0px_0px_0px_13px_transparent] before:content-[''] after:absolute after:z-[1] after:block after:h-4 after:w-4 after:rounded-full after:content-[''] checked:border-primary checked:before:opacity-[0.16] checked:after:absolute checked:after:left-1/2 checked:after:top-1/2 checked:after:h-[0.625rem] checked:after:w-[0.625rem] checked:after:rounded-full checked:after:border-primary checked:after:bg-primary checked:after:content-[''] checked:after:[transform:translate(-50%,-50%)] hover:cursor-pointer hover:before:opacity-[0.04] hover:before:shadow-[0px_0px_0px_13px_rgba(0,0,0,0.6)] focus:shadow-none focus:outline-none focus:ring-0 focus:before:scale-100 focus:before:opacity-[0.12] focus:before:shadow-[0px_0px_0px_13px_rgba(0,0,0,0.6)] focus:before:transition-[box-shadow_0.2s,transform_0.2s] checked:focus:border-primary checked:focus:before:scale-100 checked:focus:before:shadow-[0px_0px_0px_13px_#3b71ca] checked:focus:before:transition-[box-shadow_0.2s,transform_0.2s] dark:border-neutral-600 dark:checked:border-primary dark:checked:after:border-primary dark:checked:after:bg-primary dark:focus:before:shadow-[0px_0px_0px_13px_rgba(255,255,255,0.4)] dark:checked:focus:border-primary dark:checked:focus:before:shadow-[0px_0px_0px_13px_#3b71ca]",type:"radio",name:"location",id:"inlineRadio1",value:"In",defaultChecked:r.values.location==="In",onChange:r.handleChange}),e.jsx("label",{className:"mt-px inline-block pl-[0.15rem] hover:cursor-pointer",htmlFor:"inlineRadio1",children:"Indoor"})]}),e.jsxs("div",{className:"mb-[0.125rem] mr-4 inline-block min-h-[1.5rem] pl-[1.5rem]",children:[e.jsx("input",{className:"relative float-left -ml-[1.5rem] mr-1 mt-0.5 h-5 w-5 appearance-none rounded-full border-2 border-solid border-neutral-300 before:pointer-events-none before:absolute before:h-4 before:w-4 before:scale-0 before:rounded-full before:bg-transparent before:opacity-0 before:shadow-[0px_0px_0px_13px_transparent] before:content-[''] after:absolute after:z-[1] after:block after:h-4 after:w-4 after:rounded-full after:content-[''] checked:border-primary checked:before:opacity-[0.16] checked:after:absolute checked:after:left-1/2 checked:after:top-1/2 checked:after:h-[0.625rem] checked:after:w-[0.625rem] checked:after:rounded-full checked:after:border-primary checked:after:bg-primary checked:after:content-[''] checked:after:[transform:translate(-50%,-50%)] hover:cursor-pointer hover:before:opacity-[0.04] hover:before:shadow-[0px_0px_0px_13px_rgba(0,0,0,0.6)] focus:shadow-none focus:outline-none focus:ring-0 focus:before:scale-100 focus:before:opacity-[0.12] focus:before:shadow-[0px_0px_0px_13px_rgba(0,0,0,0.6)] focus:before:transition-[box-shadow_0.2s,transform_0.2s] checked:focus:border-primary checked:focus:before:scale-100 checked:focus:before:shadow-[0px_0px_0px_13px_#3b71ca] checked:focus:before:transition-[box-shadow_0.2s,transform_0.2s] dark:border-neutral-600 dark:checked:border-primary dark:checked:after:border-primary dark:checked:after:bg-primary dark:focus:before:shadow-[0px_0px_0px_13px_rgba(255,255,255,0.4)] dark:checked:focus:border-primary dark:checked:focus:before:shadow-[0px_0px_0px_13px_#3b71ca]",type:"radio",name:"location",id:"inlineRadio2",value:"Out",defaultChecked:r.values.location==="Out",onChange:r.handleChange}),e.jsx("label",{className:"mt-px inline-block pl-[0.15rem] hover:cursor-pointer",htmlFor:"inlineRadio2",children:"Outdoor"})]})]})]})]}),e.jsx("button",{className:`text-white w-full  bg-green-500 hover:bg-green-600
             focus:ring-green-400 focus:ring-2 focus:outline-none  font-medium rounded-lg
             text-sm px-5 py-2.5 text-center`,type:"submit",children:n?e.jsxs("span",{className:"inline-flex items-center gap-2",children:[e.jsx(_,{className:"animate-spin mx-auto"}),"Adding"]}):"Add"})]})]})})},I=c.memo(F),J=()=>{const[o,s]=c.useState([]),[n,a]=c.useState(!1),{currentPage:r,setCurrentPage:d,pageSize:l,setPageSize:x,itemsPerPage:p,setItemsPerPage:u}=C();c.useEffect(()=>{f.get(h+"/tables",{params:{page:r}}).then(({data:t})=>{const{tables:i,count:k,limit:y}=t;s(i),x(k),u(y)}).catch(()=>b("Oops! Something went wrong while fetching tables","error"))},[r]);const g=t=>{s(i=>[...i,t])};return e.jsxs(e.Fragment,{children:[o.length?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between mb-2 ",children:[e.jsx("h1",{className:"text-xl font-semibold ",children:"Tables "}),e.jsx(m,{label:"Add Table",className:"bg-orange-400 hover:bg-orange-500",handleButtonclick:()=>a(!0)})]}),e.jsxs("div",{className:" overflow-x-auto shadow-md sm:rounded-lg custom-vh",children:[e.jsxs("table",{className:"w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400",children:[e.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3",children:"SL:no"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Table number"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Capacity"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Location"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Action"})]})}),e.jsx("tbody",{children:o.map((t,i)=>c.createElement(P,{...t,sl_no:i+1,key:t._id}))})]}),e.jsx(S,{currentPage:r,totalCount:l,itemsPerPage:p,onPageChange:t=>d(t)})]})]}):e.jsxs("div",{className:"flex gap-2 ",children:[e.jsx("h1",{className:"text-xl font-semibold ",children:"No tables available "}),e.jsx(m,{label:"Add Table",className:"bg-orange-400 hover:bg-orange-500",handleButtonclick:()=>a(!0)})]})," ",n&&e.jsx(I,{setIsModalOpen:a,addNewTable:g})]})};export{J as default};
